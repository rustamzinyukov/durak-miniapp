<!DOCTYPE html>
<html>
<head>
    <title>Create Test Sound</title>
</head>
<body>
    <h1>Test Sound Generator</h1>
    <button onclick="generateSound()">Generate Test Sound</button>
    <button onclick="downloadSound()">Download Sound</button>
    
    <script>
        function generateSound() {
            // Create a simple sine wave tone
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const sampleRate = 44100;
            const duration = 2; // 2 seconds
            const frequency = 440; // A4 note
            
            const buffer = audioContext.createBuffer(1, sampleRate * duration, sampleRate);
            const data = buffer.getChannelData(0);
            
            for (let i = 0; i < data.length; i++) {
                data[i] = Math.sin(2 * Math.PI * frequency * i / sampleRate) * 0.3;
            }
            
            // Convert to WAV
            const wav = encodeWAV(data, sampleRate);
            const blob = new Blob([wav], { type: 'audio/wav' });
            
            // Create download link
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'test_sound.wav';
            a.click();
        }
        
        function encodeWAV(samples, sampleRate) {
            const buffer = new ArrayBuffer(44 + samples.length * 2);
            const view = new DataView(buffer);
            
            // WAV header
            const writeString = (offset, string) => {
                for (let i = 0; i < string.length; i++) {
                    view.setUint8(offset + i, string.charCodeAt(i));
                }
            };
            
            writeString(0, 'RIFF');
            view.setUint32(4, 36 + samples.length * 2, true);
            writeString(8, 'WAVE');
            writeString(12, 'fmt ');
            view.setUint32(16, 16, true);
            view.setUint16(20, 1, true);
            view.setUint16(22, 1, true);
            view.setUint32(24, sampleRate, true);
            view.setUint32(28, sampleRate * 2, true);
            view.setUint16(32, 2, true);
            view.setUint16(34, 16, true);
            writeString(36, 'data');
            view.setUint32(40, samples.length * 2, true);
            
            // Convert samples to 16-bit PCM
            let offset = 44;
            for (let i = 0; i < samples.length; i++, offset += 2) {
                let sample = Math.max(-1, Math.min(1, samples[i]));
                view.setInt16(offset, sample < 0 ? sample * 0x8000 : sample * 0x7FFF, true);
            }
            
            return buffer;
        }
        
        function downloadSound() {
            // Create a simple test sound file
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const sampleRate = 44100;
            const duration = 3; // 3 seconds
            const frequency = 220; // A3 note
            
            const buffer = audioContext.createBuffer(1, sampleRate * duration, sampleRate);
            const data = buffer.getChannelData(0);
            
            // Create a simple melody
            for (let i = 0; i < data.length; i++) {
                const t = i / sampleRate;
                const note = Math.floor(t * 2) % 4; // Change note every 0.5 seconds
                const freq = [220, 247, 277, 330][note]; // A3, B3, C#4, E4
                data[i] = Math.sin(2 * Math.PI * freq * t) * 0.2;
            }
            
            const wav = encodeWAV(data, sampleRate);
            const blob = new Blob([wav], { type: 'audio/wav' });
            
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'background_music.wav';
            a.click();
        }
    </script>
</body>
</html>


