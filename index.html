<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, viewport-fit=cover"
    />
    <link rel="manifest" href="./manifest.json" />
    <meta name="theme-color" content="#d4af37" />
    <title>–î—É—Ä–∞–∫ - –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è –∫–∞—Ä—Ç–æ—á–Ω–∞—è –∏–≥—Ä–∞</title>
    <meta name="description" content="–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è –∫–∞—Ä—Ç–æ—á–Ω–∞—è –∏–≥—Ä–∞ –î—É—Ä–∞–∫ —Å –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–º –ò–ò –î–∂–æ–∫–µ—Ä–æ–º. –ò–≥—Ä–∞–π—Ç–µ –≤ Telegram Mini App!" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./style.css?v=69" />
    <!-- Telegram Mini App SDK (browser global) -->
    <script src="https://cdn.jsdelivr.net/npm/@twa-dev/sdk@latest"></script>
    <!-- Quotes system -->
    <script src="./quotes/casino/donald.js"></script>
    <script src="./quotes/tavern/whiteWolf.js"></script>
    <script src="./quotes/underground/sergeant.js"></script>
  </head>
  <body>
    <!-- –≠–∫—Ä–∞–Ω –∑–∞–≥—Ä—É–∑–∫–∏ -->
    <div id="loadingScreen" class="loading-screen">
      <div class="loading-content">
        <div class="loading-logo">
          <img src="./logo/durak.png" alt="–î—É—Ä–∞–∫" class="loading-logo-image" />
        </div>
        <h1 class="loading-title">–î—É—Ä–∞–∫</h1>
        <p class="loading-subtitle">–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è –∫–∞—Ä—Ç–æ—á–Ω–∞—è –∏–≥—Ä–∞</p>
        <div class="loading-progress">
          <div class="loading-progress-bar">
            <div class="loading-progress-fill" id="loadingProgressFill"></div>
          </div>
          <div class="loading-progress-text" id="loadingProgressText">–ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤...</div>
        </div>
        <div class="loading-spinner">
          <div class="spinner"></div>
        </div>
      </div>
    </div>

    <div id="app" style="display: none;">
      <header class="app-header">
        <div class="header-left">
          <button class="stats-button" id="statsButton" title="–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞">üìä</button>
        </div>
        <div class="header-center">
          <div class="game-logo">
            <img src="" alt="–î—É—Ä–∞–∫" class="logo-image" id="gameLogo" />
          </div>
        </div>
        <div class="header-right">
          <div class="sound-controls-group">
            <button class="sound-effects-button" id="soundEffectsButton" title="–ó–≤—É–∫–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã">üîä</button>
            <button class="background-music-button" id="backgroundMusicButton" title="–§–æ–Ω–æ–≤–∞—è –º—É–∑—ã–∫–∞">üé∂</button>
          </div>
          <button class="profile-button" id="profileButton" title="–ü—Ä–æ—Ñ–∏–ª—å">üë§</button>
          <button class="settings-button" id="settingsButton" data-action="options" title="–ù–∞—Å—Ç—Ä–æ–π–∫–∏">‚öôÔ∏è</button>
        </div>
      </header>

      <main class="table-area">
        <section class="opponents" id="opponents">
          <div class="opponent-panel">
            <div class="opponent-avatar">
              <img src="./themes/casino/icons/person/base.jpg" alt="Opponent" id="opponentAvatar" />
            </div>
            <div class="opponent-info">
              <div class="opponent-name" id="opponentName">–î–æ–Ω–∞–ª—å–¥</div>
              <div class="opponent-comment" id="opponentComment">–ì–æ—Ç–æ–≤ –∫ –∏–≥—Ä–µ!</div>
              <div class="opponent-hint" id="opponentHint" style="font-size: 10px; color: #888; margin-top: 2px;"></div>
            </div>
            <div class="opponent-cards" id="opponentCards">
              <!-- Cards will be added here by JavaScript -->
            </div>
          </div>
        </section>

        <section class="table-wrap">
          <section class="table" id="table">
            <div class="attack-row" id="attackRow"></div>
            <div class="defense-row" id="defenseRow"></div>
          </section>
          <aside class="table-side" id="tableSide">
            <div class="indicator-wrap">
              <div class="label" id="trumpLabel">Trump</div>
              <div class="card indicator" id="trumpCard"></div>
            </div>
            <div class="indicator-wrap">
              <div class="label" id="deckLabel">Deck</div>
              <div class="card indicator" id="deckCard"></div>
            </div>
          </aside>
        </section>

      </main>

      <footer class="hand" id="playerHand"></footer>
      
      <section class="actions">
        <button id="btnAdd" data-action="attack" disabled><span class="icon"></span> Play Selected</button>
        <button id="btnTake" data-action="take" disabled><span class="icon"></span> Take Cards</button>
        <button id="btnEnough" data-action="enough" disabled><span class="icon"></span> Enough</button>
      </section>
    </div>


    <!-- Settings Overlay -->
    <div class="settings-overlay" id="settingsOverlay"></div>

    <!-- Settings Menu -->
    <div class="settings-menu" id="settingsMenu">
      <div class="settings-header">
        <h2 class="settings-title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
        <button class="settings-close" id="settingsClose">√ó</button>
      </div>
      <div class="settings-content">
        <div class="settings-section">
          <h3 class="settings-section-title">–í–∏–∑—É–∞–ª—å–Ω—ã–µ —Ç–µ–º—ã</h3>
          <div class="theme-grid">
            <div class="theme-option" data-theme="casino">
              <div class="theme-preview"></div>
              <div class="theme-name">üé∞ –ö–∞–∑–∏–Ω–æ</div>
              <div class="theme-description">–†–æ—Å–∫–æ—à–Ω–æ–µ –∫–∞–∑–∏–Ω–æ</div>
            </div>
            <div class="theme-option" data-theme="underground">
              <div class="theme-preview"></div>
              <div class="theme-name">üï≥Ô∏è –ó–µ–º–ª—è–Ω–∫–∞</div>
              <div class="theme-description">–ü–æ–¥–ø–æ–ª—å–Ω–æ–µ –∫–∞–∑–∏–Ω–æ</div>
            </div>
            <div class="theme-option" data-theme="tavern">
              <div class="theme-preview"></div>
              <div class="theme-name">üç∫ –¢–∞–≤–µ—Ä–Ω–∞</div>
              <div class="theme-description">–£—é—Ç–Ω–∞—è —Ç–∞–≤–µ—Ä–Ω–∞</div>
            </div>
          </div>
        </div>
        
        <div class="settings-section">
          <h3 class="settings-section-title">–ù–∞–±–æ—Ä—ã –∫–∞—Ä—Ç</h3>
          <div class="theme-grid">
            <div class="card-set-option" data-card-set="classic">
              <div class="card-set-preview">
                <div class="card-preview">‚ô†A</div>
              </div>
              <div class="theme-name">–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–µ</div>
              <div class="theme-description">–¢—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–µ</div>
            </div>
            <div class="card-set-option" data-card-set="modern">
              <div class="card-set-preview">
                <div class="card-preview modern">‚ô†A</div>
              </div>
              <div class="theme-name">–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ</div>
              <div class="theme-description">–ú–∏–Ω–∏–º–∞–ª–∏–∑–º</div>
            </div>
            <div class="card-set-option" data-card-set="vintage">
              <div class="card-set-preview">
                <div class="card-preview vintage">‚ô†A</div>
              </div>
              <div class="theme-name">–í–∏–Ω—Ç–∞–∂–Ω—ã–µ</div>
              <div class="theme-description">–†–µ—Ç—Ä–æ —Å—Ç–∏–ª—å</div>
            </div>
            <div class="card-set-option" data-card-set="minimal">
              <div class="card-set-preview">
                <div class="card-preview minimal">‚ô†A</div>
              </div>
              <div class="theme-name">–ú–∏–Ω–∏–º–∞–ª</div>
              <div class="theme-description">–ü—Ä–æ—Å—Ç–æ—Ç–∞</div>
            </div>
            <div class="card-set-option" data-card-set="luxury">
              <div class="card-set-preview">
                <div class="card-preview luxury">‚ô†A</div>
              </div>
              <div class="theme-name">–õ—é–∫—Å</div>
              <div class="theme-description">–ü—Ä–µ–º–∏—É–º</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Profile Settings Overlay -->
    <div class="profile-overlay" id="profileOverlay"></div>

    <!-- Profile Settings Modal -->
    <div class="profile-modal" id="profileModal">
      <div class="profile-header">
        <h2 class="profile-title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è</h2>
        <button class="profile-close" id="profileClose">√ó</button>
      </div>
      <div class="profile-content">
        <div class="profile-avatar-section">
          <div class="avatar-container">
            <div class="avatar" id="userAvatar">üë§</div>
            <button class="avatar-change-btn" id="avatarChangeBtn">–ò–∑–º–µ–Ω–∏—Ç—å</button>
          </div>
        </div>
        <div class="profile-info-section">
          <div class="input-group">
            <label for="userNickname" class="input-label">–ù–∏–∫–Ω–µ–π–º</label>
            <input type="text" id="userNickname" class="profile-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∏–∫–Ω–µ–π–º" maxlength="20">
          </div>
        </div>
        <div class="profile-actions">
          <button class="profile-save-btn" id="profileSaveBtn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
          <button class="profile-cancel-btn" id="profileCancelBtn">–û—Ç–º–µ–Ω–∞</button>
        </div>
      </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ -->
    <div class="modal" id="statsModal" style="display: none;">
      <div class="modal-content">
        <div class="modal-header">
          <h2>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–≥—Ä–æ–∫–∞</h2>
          <button class="modal-close" id="statsModalClose">&times;</button>
        </div>
        <div class="modal-body">
          <div class="stats-grid">
            <div class="stat-item">
              <div class="stat-label">–í—Å–µ–≥–æ –∏–≥—Ä</div>
              <div class="stat-value" id="totalGames">0</div>
            </div>
            <div class="stat-item">
              <div class="stat-label">–ü–æ–±–µ–¥—ã</div>
              <div class="stat-value" id="wins">0</div>
            </div>
            <div class="stat-item">
              <div class="stat-label">–ü–æ—Ä–∞–∂–µ–Ω–∏—è</div>
              <div class="stat-value" id="losses">0</div>
            </div>
            <div class="stat-item">
              <div class="stat-label">–ü—Ä–æ—Ü–µ–Ω—Ç –ø–æ–±–µ–¥</div>
              <div class="stat-value" id="winRate">0%</div>
            </div>
            <div class="stat-item">
              <div class="stat-label">–¢–µ–∫—É—â–∞—è —Å–µ—Ä–∏—è</div>
              <div class="stat-value" id="currentStreak">0</div>
            </div>
            <div class="stat-item">
              <div class="stat-label">–õ—É—á—à–∞—è —Å–µ—Ä–∏—è</div>
              <div class="stat-value" id="bestStreak">0</div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-primary" id="statsModalOk">–û–ö</button>
        </div>
      </div>
    </div>

    <script src="./script.js?v=62"></script>
  </body>
</html>