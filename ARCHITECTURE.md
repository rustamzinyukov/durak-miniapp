# ğŸ—ï¸ ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ° "Ğ”ÑƒÑ€Ğ°Ğº Mini App"

## ğŸ“Š ĞĞ±Ñ‰Ğ°Ñ ÑÑ…ĞµĞ¼Ğ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    TELEGRAM USER                             â”‚
â”‚                         â†“                                    â”‚
â”‚              ĞÑ‚ĞºÑ€Ñ‹Ğ²Ğ°ĞµÑ‚ Mini App Ğ² Ğ±Ğ¾Ñ‚Ğµ                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              GITHUB PAGES (Frontend)                         â”‚
â”‚  https://rustamzinyukov.github.io/durak-miniapp/            â”‚
â”‚                                                              â”‚
â”‚  â€¢ index.html - UI ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°                                â”‚
â”‚  â€¢ script.js - Ğ¸Ğ³Ñ€Ğ¾Ğ²Ğ°Ñ Ğ»Ğ¾Ğ³Ğ¸ĞºĞ° (4400+ ÑÑ‚Ñ€Ğ¾Ğº)                 â”‚
â”‚  â€¢ style.css - ÑÑ‚Ğ¸Ğ»Ğ¸ Ğ¸ Ñ‚ĞµĞ¼Ñ‹                                 â”‚
â”‚  â€¢ themes/ - Ğ²Ğ¸Ğ·ÑƒĞ°Ğ»ÑŒĞ½Ñ‹Ğµ Ñ€ĞµÑÑƒÑ€ÑÑ‹                             â”‚
â”‚  â€¢ sounds/ - Ğ°ÑƒĞ´Ğ¸Ğ¾ Ñ„Ğ°Ğ¹Ğ»Ñ‹                                    â”‚
â”‚  â€¢ quotes/ - Ñ€ĞµĞ¿Ğ»Ğ¸ĞºĞ¸ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶ĞµĞ¹                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
              ĞŸĞ°Ñ€ÑĞ¸Ğ½Ğ³ tgWebAppData Ğ¸Ğ· URL
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         User Data: id, first_name, last_name, username       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
              Ğ—Ğ°Ğ¿Ñ€Ğ¾Ñ Ñ„Ğ¾Ñ‚Ğ¾ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              RAILWAY SERVER (Backend Proxy)                  â”‚
â”‚  https://durak-miniapp-production.up.railway.app/           â”‚
â”‚                                                              â”‚
â”‚  Endpoint: /api/user-photo/:userId                          â”‚
â”‚                                                              â”‚
â”‚  1. ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚ userId Ğ¾Ñ‚ ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ°                              â”‚
â”‚  2. Ğ’Ñ‹Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ Telegram Bot API:                              â”‚
â”‚     getUserProfilePhotos(userId)                            â”‚
â”‚  3. Ğ—Ğ°Ğ³Ñ€ÑƒĞ¶Ğ°ĞµÑ‚ Ñ„Ğ¾Ñ‚Ğ¾ Ñ Telegram CDN                           â”‚
â”‚  4. Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ Ğ½Ğ°Ğ¿Ñ€ÑĞ¼ÑƒÑ (JPEG)                  â”‚
â”‚                                                              â”‚
â”‚  âœ… Ğ ĞµÑˆĞ°ĞµÑ‚ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñƒ CORS                                    â”‚
â”‚  âœ… ĞĞ±Ñ…Ğ¾Ğ´Ğ¸Ñ‚ privacy Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Telegram                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              TELEGRAM BOT API                                â”‚
â”‚  https://api.telegram.org/bot<TOKEN>/                       â”‚
â”‚                                                              â”‚
â”‚  â€¢ getUserProfilePhotos - Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ñ„Ğ¾Ñ‚Ğ¾                    â”‚
â”‚  â€¢ getFile - Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ¿ÑƒÑ‚Ğ¸ Ğº Ñ„Ğ°Ğ¹Ğ»Ñƒ                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ” Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ

### **Ğ Ğ°Ğ·Ğ´ĞµĞ»ĞµĞ½Ğ¸Ğµ Ğ¾Ñ‚Ğ²ĞµÑ‚ÑÑ‚Ğ²ĞµĞ½Ğ½Ğ¾ÑÑ‚Ğ¸:**
- **Frontend (GitHub Pages):** ĞŸÑƒĞ±Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ğ¹ ĞºĞ¾Ğ´, Ğ±ĞµĞ· ÑĞµĞºÑ€ĞµÑ‚Ğ¾Ğ²
- **Backend (Railway):** Ğ¥Ñ€Ğ°Ğ½Ğ¸Ñ‚ BOT_TOKEN Ğ² Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ñ… Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ
- **Telegram:** Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ñ‡ĞµÑ€ĞµĞ· signature Ğ¸ hash

### **CORS Ñ€ĞµÑˆĞµĞ½Ğ¸Ğµ:**
```
Frontend (HTTPS) â†’ Server (HTTPS) â†’ Telegram API (HTTPS)
        âœ…              âœ…                  âœ…
```

## ğŸ“¦ ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹

### **1. Game Engine (script.js)**

#### **ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ Ğ¼Ğ¾Ğ´ÑƒĞ»Ğ¸:**
- **Card Management:** ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ ĞºĞ¾Ğ»Ğ¾Ğ´Ñ‹, Ñ€Ğ°Ğ·Ğ´Ğ°Ñ‡Ğ°, ÑĞ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²ĞºĞ°
- **Game Logic:** Ñ„Ğ°Ğ·Ñ‹ Ğ¸Ğ³Ñ€Ñ‹ (attacking, defending, adding)
- **AI System:** Ğ»Ğ¾Ğ³Ğ¸ĞºĞ° Ğ˜Ğ˜ Ñ Ñ‚Ñ€ĞµĞ¼Ñ ÑƒÑ€Ğ¾Ğ²Ğ½ÑĞ¼Ğ¸ ÑĞ»Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸
- **UI Rendering:** Ğ¾Ñ‚Ñ€Ğ¸ÑĞ¾Ğ²ĞºĞ° ĞºĞ°Ñ€Ñ‚, ÑÑ‚Ğ¾Ğ»Ğ°, Ñ€ÑƒĞºĞ¸ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ°
- **Animation System:** Ğ¿Ğ¾Ğ»Ñ‘Ñ‚ ĞºĞ°Ñ€Ñ‚, Ğ¸ÑÑ‡ĞµĞ·Ğ½Ğ¾Ğ²ĞµĞ½Ğ¸Ğµ, ÑÑ„Ñ„ĞµĞºÑ‚Ñ‹
- **Sound Manager:** Ñ„Ğ¾Ğ½Ğ¾Ğ²Ğ°Ñ Ğ¼ÑƒĞ·Ñ‹ĞºĞ°, Ğ·Ğ²ÑƒĞºĞ¾Ğ²Ñ‹Ğµ ÑÑ„Ñ„ĞµĞºÑ‚Ñ‹
- **Theme System:** Ğ¿ĞµÑ€ĞµĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ñ‚ĞµĞ¼, Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ñ€ĞµÑÑƒÑ€ÑĞ¾Ğ²
- **Statistics:** Ğ¾Ñ‚ÑĞ»ĞµĞ¶Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¿Ğ¾Ğ±ĞµĞ´/Ğ¿Ğ¾Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹
- **Profile System:** ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»ĞµĞ¼ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
- **Telegram Integration:** Ğ¿Ğ°Ñ€ÑĞ¸Ğ½Ğ³ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…, Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ñ„Ğ¾Ñ‚Ğ¾

#### **Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° ĞºĞ¾Ğ´Ğ°:**
```javascript
// 1. ĞšĞ¾Ğ½ÑÑ‚Ğ°Ğ½Ñ‚Ñ‹ Ğ¸ Ğ³Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ (ÑÑ‚Ñ€Ğ¾ĞºĞ¸ 1-460)
// 2. Ğ£Ñ‚Ğ¸Ğ»Ğ¸Ñ‚Ñ‹ (Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ Ğ´Ğ»Ñ ĞºĞ°Ñ€Ñ‚, Ñ‚ĞµĞ¼, ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ¸)
// 3. Ğ˜Ğ³Ñ€Ğ¾Ğ²Ğ°Ñ Ğ»Ğ¾Ğ³Ğ¸ĞºĞ° (Ñ€Ğ°Ğ·Ğ´Ğ°Ñ‡Ğ°, Ñ…Ğ¾Ğ´Ñ‹, Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ¸)
// 4. UI Ñ€ĞµĞ½Ğ´ĞµÑ€Ğ¸Ğ½Ğ³ (Ğ¾Ñ‚Ñ€Ğ¸ÑĞ¾Ğ²ĞºĞ° Ğ²ÑĞµÑ… ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚Ğ¾Ğ²)
// 5. ĞĞ½Ğ¸Ğ¼Ğ°Ñ†Ğ¸Ğ¸ (Ğ¿Ğ¾Ğ»Ñ‘Ñ‚ ĞºĞ°Ñ€Ñ‚, ÑÑ„Ñ„ĞµĞºÑ‚Ñ‹)
// 6. AI ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° (Ğ°Ñ‚Ğ°ĞºĞ°, Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ğ°, Ğ¿Ğ¾Ğ´ĞºĞ¸Ğ´Ñ‹Ğ²Ğ°Ğ½Ğ¸Ğµ)
// 7. Event handlers (ĞºĞ»Ğ¸ĞºĞ¸, Ğ²Ñ‹Ğ±Ğ¾Ñ€ ĞºĞ°Ñ€Ñ‚)
// 8. Telegram Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ
// 9. Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ (main, preloading)
```

### **2. Theme System**

ĞšĞ°Ğ¶Ğ´Ğ°Ñ Ñ‚ĞµĞ¼Ğ° ÑĞ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ñ‚:
```
theme/
â”œâ”€â”€ cards/
â”‚   â”œâ”€â”€ WEBP_cards/ (36 ĞºĞ°Ñ€Ñ‚) - Ğ¿Ñ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚
â”‚   â””â”€â”€ SVG-cards-1.3/ (36 ĞºĞ°Ñ€Ñ‚) - fallback
â”œâ”€â”€ icons/
â”‚   â”œâ”€â”€ person/ (4 ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¸ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶Ğ°)
â”‚   â””â”€â”€ logo/durak.png
â””â”€â”€ textures/
    â”œâ”€â”€ table.jpg
    â””â”€â”€ wall.jpg
```

### **3. Sound System**

```javascript
class SoundManager {
  - backgroundMusic (Ñ‚ĞµĞ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ¼ÑƒĞ·Ñ‹ĞºĞ°)
  - soundEffects (card_on_table, card_disappear)
  - setTheme(themeName) - Ğ¿ĞµÑ€ĞµĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ñ‚ĞµĞ¼Ñ‹
  - mute/unmute controls
}
```

### **4. Server API**

```javascript
// Endpoint: GET /api/user-photo/:userId
// Response: image/jpeg (Ğ¿Ñ€ÑĞ¼Ğ¾Ğµ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ)

Flow:
1. Client â†’ Server: userId
2. Server â†’ Telegram API: getUserProfilePhotos(userId)
3. Telegram API â†’ Server: file_id, file_path
4. Server â†’ Telegram CDN: download photo
5. Server â†’ Client: JPEG image (with CORS headers)
```

## ğŸ”„ Ğ–Ğ¸Ğ·Ğ½ĞµĞ½Ğ½Ñ‹Ğ¹ Ñ†Ğ¸ĞºĞ» Ğ¸Ğ³Ñ€Ñ‹

```
1. Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° (Preloading)
   â”œâ”€â”€ ĞšĞ°Ñ€Ñ‚Ñ‹ (36 Ã— 3 Ñ‚ĞµĞ¼Ñ‹)
   â”œâ”€â”€ Ğ˜ĞºĞ¾Ğ½ĞºĞ¸
   â”œâ”€â”€ Ğ¢ĞµĞºÑÑ‚ÑƒÑ€Ñ‹
   â”œâ”€â”€ Ğ—Ğ²ÑƒĞºĞ¸
   â””â”€â”€ Ğ›Ğ¾Ğ³Ğ¾Ñ‚Ğ¸Ğ¿Ñ‹

2. Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ
   â”œâ”€â”€ initDomRefs() - ÑÑÑ‹Ğ»ĞºĞ¸ Ğ½Ğ° DOM ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚Ñ‹
   â”œâ”€â”€ initPlayers() - ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ¾Ğ²
   â”œâ”€â”€ dealInitial() - Ñ€Ğ°Ğ·Ğ´Ğ°Ñ‡Ğ° ĞºĞ°Ñ€Ñ‚
   â”œâ”€â”€ bindEvents() - Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸ĞºĞ¸ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğ¹
   â””â”€â”€ Telegram integration (ĞµÑĞ»Ğ¸ Ğ² Telegram)

3. Ğ˜Ğ³Ñ€Ğ¾Ğ²Ğ¾Ğ¹ Ñ†Ğ¸ĞºĞ»
   â”œâ”€â”€ Ğ¤Ğ°Ğ·Ğ° Ğ°Ñ‚Ğ°ĞºĞ¸ (attacking)
   â”œâ”€â”€ Ğ¤Ğ°Ğ·Ğ° Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ñ‹ (defending)
   â”œâ”€â”€ Ğ¤Ğ°Ğ·Ğ° Ğ¿Ğ¾Ğ´ĞºĞ¸Ğ´Ñ‹Ğ²Ğ°Ğ½Ğ¸Ñ (adding)
   â””â”€â”€ ĞšĞ¾Ğ½ĞµÑ† Ñ€Ğ°ÑƒĞ½Ğ´Ğ° (bito Ğ¸Ğ»Ğ¸ Ğ²Ğ·ÑÑ‚Ğ¸Ğµ)

4. AI Loop
   â”œâ”€â”€ aiAttack() - Ğ˜Ğ˜ Ğ°Ñ‚Ğ°ĞºÑƒĞµÑ‚
   â”œâ”€â”€ aiDefense() - Ğ˜Ğ˜ Ğ·Ğ°Ñ‰Ğ¸Ñ‰Ğ°ĞµÑ‚ÑÑ
   â”œâ”€â”€ aiAdd() - Ğ˜Ğ˜ Ğ¿Ğ¾Ğ´ĞºĞ¸Ğ´Ñ‹Ğ²Ğ°ĞµÑ‚
   â””â”€â”€ ĞšĞ¾Ğ¼Ğ¼ĞµĞ½Ñ‚Ğ°Ñ€Ğ¸Ğ¸ Ğ¸ ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¸

5. ĞšĞ¾Ğ½ĞµÑ† Ğ¸Ğ³Ñ€Ñ‹
   â”œâ”€â”€ checkEndgame() - Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ÑƒÑĞ»Ğ¾Ğ²Ğ¸Ğ¹
   â”œâ”€â”€ updatePlayerStats() - Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ¸
   â””â”€â”€ showEndgameModal() - Ğ¿Ğ¾ĞºĞ°Ğ· Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ°
```

## ğŸ¨ Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ñ‚ĞµĞ¼

### **ĞŸĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶Ğ¸:**
- **Casino:** Donald Trump (Ñ†Ğ¸Ñ‚Ğ°Ñ‚Ñ‹ Ğ¿Ñ€Ğ¾ Ğ¿Ğ¾Ğ±ĞµĞ´Ñ‹ Ğ¸ deals)
- **Tavern:** Geralt of Rivia (Ñ†Ğ¸Ñ‚Ğ°Ñ‚Ñ‹ Ğ¸Ğ· Ğ’ĞµĞ´ÑŒĞ¼Ğ°ĞºĞ°)
- **Underground:** Sergeant Hartman (Ğ°Ñ€Ğ¼ĞµĞ¹ÑĞºĞ¸Ğµ Ñ†Ğ¸Ñ‚Ğ°Ñ‚Ñ‹)

### **ĞšĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚Ñ‹ Ñ†Ğ¸Ñ‚Ğ°Ñ‚:**
- attacking (Ğ°Ñ‚Ğ°ĞºĞ°)
- defending (Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ğ°)
- taking (Ğ²Ğ·ÑÑ‚Ğ¸Ğµ ĞºĞ°Ñ€Ñ‚)
- winning (Ğ¿Ğ¾Ğ±ĞµĞ´Ğ°)
- special (Ğ¾ÑĞ¾Ğ±Ñ‹Ğµ ÑĞ¸Ñ‚ÑƒĞ°Ñ†Ğ¸Ğ¸: Ğ¼Ğ°Ğ»Ğ¾ ĞºĞ°Ñ€Ñ‚, ĞºĞ¾Ğ·Ñ‹Ñ€Ğ¸ Ğ¸ Ñ‚.Ğ´.)

## ğŸ“± Telegram Integration

### **ĞœĞµÑ‚Ğ¾Ğ´Ñ‹ Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…:**

1. **window.Telegram.WebApp.initDataUnsafe** (Ğ¿Ñ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚)
2. **window.Telegram.WebApp.initData** (Ğ¿Ğ°Ñ€ÑĞ¸Ğ½Ğ³)
3. **URL hash parsing** (fallback Ğ´Ğ»Ñ Ğ½ĞµĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ñ… Ğ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼)
4. **window.parent.Telegram** (iframe)
5. **window.top.Telegram** (nested iframe)

### **ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°ĞµĞ¼Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ:**
```javascript
{
  id: 280642403,
  first_name: "Rustam",
  last_name: "Zinyukov",
  username: "zinyukov",
  language_code: "ru",
  photo_url: "..." // Ñ‡ĞµÑ€ĞµĞ· server API
}
```

## ğŸ”§ Ğ¢ĞµÑ…Ğ½Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ´ĞµÑ‚Ğ°Ğ»Ğ¸

### **Performance:**
- WebP ĞºĞ°Ñ€Ñ‚Ñ‹ (~50% Ğ¼ĞµĞ½ÑŒÑˆĞµ SVG)
- Resource caching
- Lazy loading Ğ·Ğ²ÑƒĞºĞ¾Ğ²
- Preloading ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… Ñ€ĞµÑÑƒÑ€ÑĞ¾Ğ²

### **Browser Support:**
- Chrome/Edge 90+
- Firefox 88+
- Safari 14+
- Telegram WebView

### **Telegram Mini App:**
- SDK Ğ²ĞµÑ€ÑĞ¸Ñ: 9.1+
- Platforms: iOS, Android, Desktop
- Theme params: Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ°Ğ´Ğ°Ğ¿Ñ‚Ğ°Ñ†Ğ¸Ñ

## ğŸ“ˆ Roadmap

- [ ] ĞœÑƒĞ»ÑŒÑ‚Ğ¸Ğ¿Ğ»ĞµĞµÑ€ (WebSocket)
- [ ] Ğ‘Ğ¾Ğ»ÑŒÑˆĞµ Ñ‚ĞµĞ¼
- [ ] ĞšĞ°ÑÑ‚Ğ¾Ğ¼Ğ½Ñ‹Ğµ Ğ½Ğ°Ğ±Ğ¾Ñ€Ñ‹ ĞºĞ°Ñ€Ñ‚
- [ ] Ğ¢ÑƒÑ€Ğ½Ğ¸Ñ€Ñ‹ Ğ¸ Ñ€ĞµĞ¹Ñ‚Ğ¸Ğ½Ğ³Ğ¸
- [ ] Ğ”Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ (achievements)

## ğŸ› Known Issues

- ĞĞµÑ‚ (Ğ²ÑÑ‘ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚! ğŸ‰)

## ğŸ“ ĞšĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚Ñ‹

- Telegram: [@zinyukov](https://t.me/zinyukov)
- GitHub: [@rustamzinyukov](https://github.com/rustamzinyukov)

---

**Ğ’ĞµÑ€ÑĞ¸Ñ:** 1.28.0 (October 2025)

