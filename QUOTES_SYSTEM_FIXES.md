# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã —Ü–∏—Ç–∞—Ç

## üìã –ü—Ä–æ–±–ª–µ–º—ã

### 1. üö® –û—à–∏–±–∫–∞ `exports is not defined`
```
Uncaught ReferenceError: exports is not defined
(anonymous) @ index.js:2
```

**–ü—Ä–∏—á–∏–Ω–∞**: –§–∞–π–ª—ã —Ü–∏—Ç–∞—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ `module.exports`, –Ω–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ —ç—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç.

### 2. üö® –û—à–∏–±–∫–∞ `L.attacking.ai is not a function`
```
Uncaught TypeError: L.attacking.ai is not a function
    at updateCommentaryIfNeeded (script.js?v=62:961:32)
```

**–ü—Ä–∏—á–∏–Ω–∞**: –ö–æ–¥ –ø—ã—Ç–∞–ª—Å—è –≤—ã–∑–≤–∞—Ç—å `L.attacking.ai` –∫–∞–∫ —Ñ—É–Ω–∫—Ü–∏—é, –Ω–æ –æ–Ω–∞ –º–æ–≥–ª–∞ –±—ã—Ç—å –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞.

## üõ†Ô∏è –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### ‚úÖ 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —ç–∫—Å–ø–æ—Ä—Ç–∞ –≤ —Ñ–∞–π–ª–∞—Ö —Ü–∏—Ç–∞—Ç

**‚ùå –ë—ã–ª–æ:**
```javascript
// –≠–∫—Å–ø–æ—Ä—Ç –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –∏–≥—Ä–µ
if (typeof module !== 'undefined' && module.exports) {
  module.exports = donaldQuotes;
} else {
  window.donaldQuotes = donaldQuotes;
}
```

**‚úÖ –°—Ç–∞–ª–æ:**
```javascript
// –≠–∫—Å–ø–æ—Ä—Ç –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –∏–≥—Ä–µ
window.donaldQuotes = donaldQuotes;
```

**–ü—Ä–∏–º–µ–Ω–µ–Ω–æ –∫ —Ñ–∞–π–ª–∞–º:**
- `quotes/casino/donald.js`
- `quotes/tavern/whiteWolf.js`
- `quotes/underground/sergeant.js`

### ‚úÖ 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—ã–∑–æ–≤–∞ —Ñ—É–Ω–∫—Ü–∏–π —Ü–∏—Ç–∞—Ç

**‚ùå –ë—ã–ª–æ:**
```javascript
// –ï—Å–ª–∏ –∞—Ç–∞–∫—É–µ—Ç –ò–ò, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –æ—Ç –ò–ò
const aiPlayer = state.players.find(p => !p.isHuman);
msg = pick(L.attacking.ai(aiPlayer?.name || "–î–æ–Ω–∞–ª—å–¥"));
```

**‚úÖ –°—Ç–∞–ª–æ:**
```javascript
// –ï—Å–ª–∏ –∞—Ç–∞–∫—É–µ—Ç –ò–ò, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –æ—Ç –ò–ò
const aiPlayer = state.players.find(p => !p.isHuman);
if (typeof L.attacking.ai === 'function') {
  msg = pick(L.attacking.ai(aiPlayer?.name || "–î–æ–Ω–∞–ª—å–¥"));
} else {
  msg = pick(L.attacking.ai);
}
```

**–ü—Ä–∏–º–µ–Ω–µ–Ω–æ –∫:**
- `updateCommentaryIfNeeded()` - –æ—Å–Ω–æ–≤–Ω–∞—è —Å–µ–∫—Ü–∏—è
- `updateCommentaryIfNeeded()` - fallback —Å–µ–∫—Ü–∏—è
- –í—Å–µ —Ñ–∞–∑—ã: `attacking`, `defending`, `adding`

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

### ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:
- **–û—à–∏–±–∫–∞ `exports is not defined`** - –±–æ–ª—å—à–µ –Ω–µ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç
- **–û—à–∏–±–∫–∞ `L.attacking.ai is not a function`** - –±–æ–ª—å—à–µ –Ω–µ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç
- **–°–∏—Å—Ç–µ–º–∞ —Ü–∏—Ç–∞—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç** –¥–ª—è –≤—Å–µ—Ö —Ç–µ–º
- **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è** –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### üéÆ –û–∂–∏–¥–∞–µ–º—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –∫–æ–Ω—Å–æ–ª–∏:
```
üéÆ renderHand called
üë§ Player: {id: "P0", name: "You", isHuman: true, hand: Array(6)}
üÉè Hand length: 6
üéØ playerHand element: <footer class="hand" id="playerHand"></footer>
üé≠ Changing avatar to: happy.jpg
‚úÖ render() completed
```

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### üìÅ –§–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
```
quotes/
‚îú‚îÄ‚îÄ casino/
‚îÇ   ‚îî‚îÄ‚îÄ donald.js          # ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω —ç–∫—Å–ø–æ—Ä—Ç
‚îú‚îÄ‚îÄ tavern/
‚îÇ   ‚îî‚îÄ‚îÄ whiteWolf.js       # ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω —ç–∫—Å–ø–æ—Ä—Ç
‚îî‚îÄ‚îÄ underground/
    ‚îî‚îÄ‚îÄ sergeant.js       # ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω —ç–∫—Å–ø–æ—Ä—Ç
```

### üé≠ –°–∏—Å—Ç–µ–º–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
- **–î–æ–Ω–∞–ª—å–¥ (Casino)**: –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ç–æ–Ω
- **–ë–µ–ª—ã–π –í–æ–ª–∫ (Tavern)**: –í–æ–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Ç–æ–Ω
- **–°–µ—Ä–∂–∞–Ω—Ç (Underground)**: –ú—Ä–∞—á–Ω—ã–π —Ç–æ–Ω

### üéØ –¢–∏–ø—ã —Ü–∏—Ç–∞—Ç
- **–û—Å–Ω–æ–≤–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è**: –∞—Ç–∞–∫–∞, –∑–∞—â–∏—Ç–∞, –ø–æ–¥–∫–∏–¥—ã–≤–∞–Ω–∏–µ, –≤–∑—è—Ç–∏–µ
- **–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏—Ç—É–∞—Ü–∏–∏**: –º–Ω–æ–≥–æ –∫–∞—Ä—Ç, –º–∞–ª–æ –∫–∞—Ä—Ç, –∫–æ–∑—ã—Ä–∏, –ø—É—Å—Ç–∞—è –∫–æ–ª–æ–¥–∞
- **–û—Ç –ø–µ—Ä–≤–æ–≥–æ –ª–∏—Ü–∞**: –≤—Å–µ —Ü–∏—Ç–∞—Ç—ã –æ—Ç –∏–º–µ–Ω–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞

## üöÄ –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å

### 1. **–û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ –±—Ä–∞—É–∑–µ—Ä–µ**
### 2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å - –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—à–∏–±–æ–∫**
### 3. **–°–¥–µ–ª–∞–π—Ç–µ —Ö–æ–¥ –≤ –∏–≥—Ä–µ**
### 4. **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–æ–ª–∂–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è —Ç–µ–º–∞—Ç–∏—á–Ω–æ**

### üìä –û–∂–∏–¥–∞–µ–º—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –∫–æ–Ω—Å–æ–ª–∏:
```
üéÆ renderHand called
üë§ Player: {id: "P0", name: "You", isHuman: true, hand: Array(6)}
üÉè Hand length: 6
üéØ playerHand element: <footer class="hand" id="playerHand"></footer>
üé≠ Changing avatar to: happy.jpg
‚úÖ render() completed
```

## ‚ú® –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

### üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ:
- **–ù–µ—Ç –æ—à–∏–±–æ–∫ —ç–∫—Å–ø–æ—Ä—Ç–∞** - —Ñ–∞–π–ª—ã —Ä–∞–±–æ—Ç–∞—é—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- **–ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –≤—ã–∑–æ–≤—ã —Ñ—É–Ω–∫—Ü–∏–π** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–∞ –ø–µ—Ä–µ–¥ –≤—ã–∑–æ–≤–æ–º
- **Fallback —Å–∏—Å—Ç–µ–º–∞** - —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ —Ü–∏—Ç–∞—Ç—ã –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

### üé® –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ:
- **–¢–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏** –¥–ª—è –∫–∞–∂–¥–æ–π —Ç–µ–º—ã
- **–†–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ** - –º–Ω–æ–≥–æ —Ä–∞–∑–Ω—ã—Ö –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
- **–ê—Ç–º–æ—Å—Ñ–µ—Ä–∞** - —Ü–∏—Ç–∞—Ç—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Å—Ç–∏–ª—é —Ç–µ–º—ã

### üéÆ –ò–≥—Ä–æ–≤—ã–µ:
- **–ò–º–º–µ—Ä—Å–∏–≤–Ω–æ—Å—Ç—å** - –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Å–æ–∑–¥–∞—é—Ç –∞—Ç–º–æ—Å—Ñ–µ—Ä—É
- **–û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å** - –∏–≥—Ä–æ–∫ –ø–æ–Ω–∏–º–∞–µ—Ç, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç
- **–ú–æ—Ç–∏–≤–∞—Ü–∏—è** - –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–µ–ª–∞—é—Ç –∏–≥—Ä—É —É–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–µ–µ

## üéØ –ü—Ä–∏–º–µ—Ä—ã —Ü–∏—Ç–∞—Ç –ø–æ —Ç–µ–º–∞–º

### üé∞ Casino (–î–æ–Ω–∞–ª—å–¥)
- **–ê—Ç–∞–∫–∞**: "–•–æ—Ä–æ—à–∏–π —Ö–æ–¥! –ù–æ —è –≤–∏–∂—É —Ç–≤–æ—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é..."
- **–ó–∞—â–∏—Ç–∞**: "–ó–∞—â–∏—â–∞–π—Å—è! –Ø –≤–∏–∂—É, —á—Ç–æ —É —Ç–µ–±—è –µ—Å—Ç—å –≤–∞—Ä–∏–∞–Ω—Ç—ã."
- **–ú–Ω–æ–≥–æ –∫–∞—Ä—Ç**: "–°—Ç–æ–ª –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω –∫–∞—Ä—Ç–∞–º–∏! –≠—Ç–æ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ..."

### üç∫ Tavern (–ë–µ–ª—ã–π –í–æ–ª–∫)
- **–ê—Ç–∞–∫–∞**: "–•–æ—Ä–æ—à–∏–π —É–¥–∞—Ä, –≤–æ–∏–Ω! –ù–æ —è –≤–∏–¥–µ–ª –ª—É—á—à–∏—Ö –±–æ–π—Ü–æ–≤!"
- **–ó–∞—â–∏—Ç–∞**: "–ó–∞—â–∏—â–∞–π—Å—è, –≤–æ–∏–Ω! –ü–æ–∫–∞–∂–∏ —Å–≤–æ—é —Å—Ç–æ–π–∫–æ—Å—Ç—å!"
- **–ú–Ω–æ–≥–æ –∫–∞—Ä—Ç**: "–°—Ç–æ–ª –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω –∫–∞—Ä—Ç–∞–º–∏! –≠—Ç–æ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–∞—Å—Ç–æ—è—â–µ–π –±–∏—Ç–≤–æ–π!"

### üï≥Ô∏è Underground (–°–µ—Ä–∂–∞–Ω—Ç)
- **–ê—Ç–∞–∫–∞**: "–¢–≤–æ—è –∞—Ç–∞–∫–∞ —Å–ª–∞–±–∞! –Ø –≤–∏–¥–µ–ª —Å–∏–ª—å–Ω–µ–µ –≤ –ø–æ–¥–∑–µ–º–µ–ª—å—è—Ö!"
- **–ó–∞—â–∏—Ç–∞**: "–ó–∞—â–∏—â–∞–π—Å—è! –ù–æ –ø–æ–º–Ω–∏ - —è –Ω–µ —Å–ø–ª—é –≤ —ç—Ç–æ–π —Ç—å–º–µ!"
- **–ú–Ω–æ–≥–æ –∫–∞—Ä—Ç**: "–°—Ç–æ–ª –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω –∫–∞—Ä—Ç–∞–º–∏! –≠—Ç–æ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–∞—Å—Ç–æ—è—â–µ–π –±–∏—Ç–≤–æ–π –≤ –ø–æ–¥–∑–µ–º–µ–ª—å–µ!"

–¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞ —Ü–∏—Ç–∞—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ –¥–ª—è –≤—Å–µ—Ö —Ç–µ–º! üéâüí¨üéÆ


